<html lang="en"> 
    <head> 
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cálculo TMB</title> 
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>
    </head> 
    <body>
        <div class="container"> 
            <h1>Cálculo TMB</h1> 
            <hr> 
            <h2>Calcular TMB</h2> 
            <form id="tmb" onsubmit="return calcularTmb(event)">
                <input id="masculino" type="radio" name="genero" value="masculino">
                <label for="masculino">Masculino</label>

                <input id="feminino" type="radio" name="genero" value="feminino">
                <label for="feminino">Feminino</label>

                <input id="idade" name="idade" type="number" field="idade" placeholder="Idade(anos)" class="form-control mt-4 col-4" required minlenght="1">
                <input id="peso" name="peso" type="number" field="peso" placeholder="Peso(kg)" class="form-control mt-4 col-4" required minlenght="1">
                <input id="altura" name="altura" type="number" field="altura" placeholder="Altura(cm)" class="form-control mt-4 col-4" required minlenght="2">
                <input id="fator" name="fator" type="number" field="fator" placeholder="Fator de atividade(FA)" class="form-control mt-4 col-4" required minlenght="2">
                <br>
                <button type="submit" class="btn btn-success col-2">Calcular</button> <br>
                <br> <label>Resultado: <output id="resultado"></output> </label> 
            </form> 
             <hr>
            <p>Fator de atividade (FA):
                1,3 - sedentário. 1,4 - levemente ativo. 1,5 - treino e cardio iniciante a intermediário quase todos os dias, com rotina de pouca atividade. 1,6 - treino e cardio avançado ou extremamente avançado com rotina de pouca atividade. 1,7 - treino de cardio avançado ou extremamente avançado com rotina de muita atividade ou hormonizado*.</p>
            <hr>
             <a th:href="@{/mostrarIndex}">Voltar</a> 
        </div>
        <script>
            $(document).ready(function () {
                $("#tmb").validate({
                    rules: {
                        idade: {
                            required: true,
                            minlength: 1
                        },
                        peso: {
                            required: true,
                            number: true,
                            minlength: 1
                        },
                        altura: {
                            required: true,
                            number: true,
                            minlength: 2
                        },
                        fator: {
                            required: true,
                            number: true,
                            minlength: 2
                        }
                    },
                    messages: {
                        idade: {
                            required: "Por favor, insira sua idade",
                            minlength: "A idade deve ter no mínimo 1 caractere"
                        },
                        peso: {
                            required: "Por favor, insira seu peso",
                            minlength: "O peso deve ter no mínimo 1 caractere"
                        },
                        altura: {
                            required: "Por favor, insira sua altura",
                            minlength: "A altura deve ter no mínimo 2 caracteres"
                        },
                        fator: {
                            required: "Por favor, insira o fator de atividade",
                            minlength: "O fator deve ter no mínimo 2 caracteres"
                        }
                    }
                });
            });

            function calcularTmb(event) {
                event.preventDefault();
                let idade = document.getElementById("idade").value;
                let peso = document.getElementById("peso").value;
                let altura = document.getElementById("altura").value;
                let fator = document.getElementById("fator").value;
                let tmbHomem = fator * (88.362 + (13.397 * peso) + (4.799 * altura) - (5.677 * idade));
                let tmbMulher = fator * (447.593 + (9.247 * peso) + (3.098 * altura) - (4.330 * idade));

                if (!document.getElementById("masculino").checked && !document.getElementById("feminino").checked) {
                    alert("Escolha uma opção: Masculino ou Feminino");
                } else if (document.getElementById("masculino").checked) {
                    document.getElementById("resultado").value = tmbHomem.toFixed(2);
                } else {
                    document.getElementById("resultado").value = tmbMulher.toFixed(2);
                }
            }
        </script>
    </body>         
</html>
